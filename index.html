<!DOCTYPE html>
<html>
<head>
    <title>Grandma's Questions</title>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.css">
    <style>
      body {
        background-color: #9a9a9a;
      }
    </style>
</head>
<body>
  <div class="ui container center aligned" id="questions-container">
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.js"></script>
  <script>
    const BACKEND_URL = 'https://script.google.com/macros/s/AKfycbzUFzcKow2b8fOPKboaRQe4dVO5vxAlsrIV1COhGP1ooLVTjJVMPUnKAErMqEMjK_8E/exec?action=load'

    const load = async () => {
      return await fetch(BACKEND_URL)
        .then(response => response.json())
        .then(({ questions }) => questions)
    }

    // answer states in cookies includes a json of the question id and "correct/incorrect/unanswered"

    const save = async (questionId, answerState) => {
      $.cookie('answerStates', JSON.stringify({ ...JSON.parse($.cookie('answerStates')), [questionId]: answerState }))
    }

    $(document).ready(function() {
      (async () => {
        const questions = await load()
        const $container = $('#questions-container')

        questions.forEach(question => {
          const $question = $(`
            <div class="ui card">
              <div class="content">
                <div class="header">${question.question}</div>
                <div class="meta">${question.author}</div>
                <div class="description">${question.answer}</div>
              </div>
            </div>
          `)
          // $container.append($question)
        })
      }) ()
    })
  </script>
</body>
</html>